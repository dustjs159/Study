Switch
================================
Network Switch
--------------------------------

# Network Switch
* 네트워크와 네트워크를 연결하는 통신 장비
* 소규모 통신을 위한 허브보다 전송속도가 개선

# L1 Switch : HUB
* 더미 허브
* 데이터 패킷을 받으면 포트에 연결된 모든 장비에 전송
* 사용되는 포트가 많아질 수록 속도가 느려지고 패킷이 충돌할 가능성이 있음
* OSI 7계층중 1계층(물리 계층)에서 사용

# L2 Switch : **MAC주소 기반 네트워크**
* 허브의 상위 장비
* 데이터 패킷의 목적지 **MAC주소**를 찾아서 해당 목적지에만 패킷 전송
* 연결되는 장비의  IP주소는 알 수 없음
* 기본적으로 라우팅 기능 제외
* OSI 7계층중 2계층(데이터링크 계층)에서 사용

# L3 Switch : **IP주소 기반 네트워크**
* L2 Switch의 상위 장비
* 데이터 패킷의 목적지 **IP주소**를 찾아서 해당 목적지에만 패킷 전송
* L2 Switch의 모든 기능을 사용할 수 있고**라우팅** 기능이 추가됨
* OSI 7계층중 3계층(네트워크 계층)에서 사용

# L4 Switch : **로드밸런싱**
* L3 Switch의 상위 장비
* 데이터 패킷의 IP주소와 **Port번호**를 찾아서 해당 목적지에만 패킷 전송
* **로드밸런싱(부하 분산)** 기능 추가
* TCP/UDP의 헤더를 보고 프로토콜의 종류를 확인하고 어떤 처리를 먼저 진행할 것인지 판단할 수 있음
* OSI 7계층중 4계층(전송 계층)에서 사용

# L7 Switch : **보안을 고려한 로드밸런싱**
* 네트워크 보안장비의 역할을 함
* L4 Switch에 실제 데이터를 확인하여 패킷을 처리하는 기능 추가
* 데이터 패킷의 Port번호와 실제 데이터를 기반으로 해당 목적지에 패킷 전송
* 실제 데이터(HTTP의 쿠키 등)를 분석해**보안성에 있어서 정교한 로드밸런싱**이 가능해짐


 
# Load Balancing : L4 & L7 Switch
* 부하 분산 : 해야할 작업을 나누어 서버의 부하를 분산시키는 것
* 사용자가 늘어남에 따라 필요성 대두
* 서버의 하드웨어 성능을 올리는 것 만으로는 한계가 있었음
* 로드밸런싱 알고리즘
1. 라운드 로빈
> 서버에 들어온 요청을 순서대로 돌아가며 배정하는 방식   
> 서버와 연결이 장기간 필요하지 않은 경우 적합   
2. 가중 라운드 로빈
> 각 서버에 가중치를 매기고 가중치가 높은 서버에 요청을 처리   
> 운영중인 서버마다 각각 부하 처리능력이 다를 경우 사용   
3. 최소 연결 방식
> 요청이 들어온 시점에 서버들 중에서 가장 연결이 적게 되어있는 서버에게 요청을 처리   
> 운영중인 서버들에게 분배된 트래픽이 일정하지 않은 경우에 사용   
4. IP 해시 방식
> 클라이언트의 IP주소를 특정 서버로 매핑하여 요청을 처리   
> 사용자가 항상 동일한 서버로 연결됨   












 
