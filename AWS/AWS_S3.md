💻 [AWS] Amazon S3
==================
# 💡 Amazon S3 

* Amazon S3(Simple Storage Service)는 인터넷용 **객체(Object) 스토리지** 서비스
* 웹 상에서 HTTP 기반 REST API를 통해  **언제 어디서나** 데이터를 업로드 및 다운로드 가능
* 높은 내구성을 바탕으로 안전하게 데이터 손실 없이 저장이 가능합니다.
* 데이터를 **버킷**이라는 저장공간에 **객체 단위로 저장**하고 저장된 버킷에 접근하기 위해서는 **키를 사용하여 접근**합니다.
* **무제한** 스토리지입니다. (객체는 최대 5TB)
* S3는 웹을 통해 접근이 가능하기 때문에 **정적인 웹 페이지를 호스팅**하는 웹 서버의 역할도 할  수 있습니다.
* S3의 버킷에 저장되는 데이터들이 민감한 데이터일 경우 접근 권한을 설정하여 데이터에 대한 외부의 접근을 금지할 수 있습니다.

# S3 사용의 장점

* **내구성** : 높은 내구성(99.9999999999%)을 바탕으로 스토리지의 장애나 오류에 강합니다.
* **가용성** : S3의 버킷에 저장되는 객체들은 리전 내 최소 3개 이상의 가용 영역에 복제되어 저장됩니다. 그렇기 때문에 특정 스토리지에 장애가 발생할 경우에도 계속 사용이 가능합니다.
* 보안성 : 버킷에 대한 퍼블릭 액세스 차단을 설정하여 민감한 데이터를 보호할 수 있습니다.
* 확장성 : EC2 서비스처럼 다양한 스토리지 클래스가 준비되어 있고 필요에 따라 확장 및 축소가 가능합니다.

### S3 개념

* **버킷** : 객체 단위의 데이터를 저장하는 컨테이너입니다.
* 버킷을 생성할 때는 S3 내에서 고유한 이름을 사용해야하고 리전을 선택해야 합니다. 버킷 생성 후에는 버킷의 이름과 리전을 변경할 수 없습니다. 또한 버킷 내에 버킷을 생성하는 것은 불가능합니다.
* 버킷에 대한 **퍼블릭 액세스 관리**를 통해 접근 제한을 할 수 있습니다.
* **객체** : 버킷에 저장되는 데이터들의 단위입니다.
* 객체는 객체의 데이터 & 메타데이터로 구성됩니다. 메타데이터는 객체의 정보를 담고 있는 이름 - 값으로 구성된 한 쌍의 집합입니다.
* 객체에 접근하기 위해서는 _https://{Bucket}.s3.{region}.amazonaws.com/{Object}_ 형식으로 접속하면 웹으로 객체를 확인할 수 있습니다.
* **키** : 버킷 내 객체를 찾기 위한 식별자 입니다. 모든 객체들은 반드시 하나의 키를 가집니다. 

### S3 접근 권한

* 기본적으로 S3 버킷 및 객체는 **프라이빗**입니다. (S3 버킷을 생성한 AWS 계정만 액세스 가능)
* S3 버킷을 소유하고 있는 AWS 계정으로 액세스 정책을 설정하여 다른 사람들에게 액세스 권한을 부여할 수 있습니다. 
* S3 리소스(버킷 및 객체)에 대한 액세스를 제한하는 방법은 3가지가 있습니다. 버킷 단위로 액세스를 제한하는 버**킷 정책**, 리소스 소유자의 AWS 계정 내 사용자 계정 단위로 제한하는 **사용자 정책(IAM)**, **ACL(Access Control List)**에 의한 관리 정책이 있습니다.
* 버킷 정책 : 버킷에 접속할 수 있는 **사용자를 지정**합니다. JSON 파일 형식으로 작성합니다.
* 사용자 정책(IAM) : 접속이 가능한 **버킷을 지정**합니다. JSON 파일 형식으로 작성합니다.
* ACL(Access Control List) 액세스 관리 : 본인 외 다른 사용자들에게 **'어떤' 접근이나 작업을 '허가 및 거부' 할 것인지** 여부를 정합니다. 작업의 대상은 리소스(버킷 및 객체) 액세스, 리소스에 대한 작업(GET, DELETE 등)이 있습니다.

## Amazon S3 스토리지 클래스

* S3에는 사용할 수 있는 스토리지의 종류가 다양합니다. 버킷에 데이터를 업로드 할 때 다양한 종류의 스토리지들 중에서 목적에 맞게 선택해서 사용합니다.
* 대부분의 스토리지 클래스가 고가용성을 보장합니다.



### S3 Standard

* 가장 보편적인 스토리지 클래스입니다.
* 스토리지 클래스중 데이터 액세스가 가장 빈번하게 일어나는 경우에 적절합니다.
* 버킷에 객체를 업로드할 때 스토리지 클래스를 지정하지 않은 경우 Default 값으로 S3 Standard를 사용합니다.

### S3 Intelligent-Tiering

* 데이터가 저장되는 곳을 두 계층으로 나누어 Frequent 계층에는 데이터 액세스가 잦은 데이터가 저장되고 Infrequent 계층에는 상대적으로 데이터 액세스가 적은 데이터들을 **분리하여 저장**합니다.
* 데이터 액세스를 패턴을 모니터링하여 두 계층 간 데이터를 자동으로 이동시킵니다.
* 데이터 액세스가 불규칙적인 경우에 데이터를 분리 저장하여 비용을 줄이고자 할 때 사용합니다.

### S3 Standard-IA(Infrequent Access)

* S3 Standard와 동일한 성능을 갖고 있습니다. S3 Standard보다 데이터 액세스가 적게 발생할 경우에 S3 Standard-IA를 선택하여 비용을 낮출 수 있습니다.
* 자주 액세스하지 않지만 필요할 때 빠르게 데이터에 액세스할 때 적합합니다.
* 장기적인 백업용 스토리지로 적합합니다.

### S3 One Zone-IA

* 일반적으로 S3의 스토리지들은 최소 3개 이상의 가용 영역에 저장됩니다. 하지만 S3 One Zone-IA는 하나의 가용 영역에만 데이터를 저장합니다.
* 하나의 가용 영역에만 저장하기 때문에 S3 Standard-IA에 비해 상대적으로 비용이 저렴합니다.
* 비용은 상대적으로 저렴하나, 하나의 가용 영역에만 데이터가 저장되기 때문에 가용성이 떨어지게 된다는 단점이 발생합니다. 따라서 가용성이 낮아도 큰 문제가 없는 데이터들을 S3 One Zone-IA에 저장하여 비용을 낮출 수 있습니다.

### S3 Glacier / Deep Archive

* S3 Glacier는 장기간 저비용 데이터 보관이 가능한 스토리지 클래스입니다. 주로 **아카이브** 목적으로 사용됩니다.
* 데이터를 객체가 아닌 볼트(Vault)단위의 컨테이너로 저장합니다.
* 다량의 데이터를 장기간 저장해야 할 경우에 적합합니다.  
      
    → 백업(Backup)과 아카이브(Archive)는 목적이 조금 다릅니다. 백업은 원본 데이터의 손실이 발생할 경우를 대비하여 원본 데이터의 사본을 따로 만들어 저장합니다. 정상적인 데이터의 복원(Restore)이 주된 목적이며 사본을 만든 후에도 원본 데이터는 삭제되지 않고 유지됩니다.  
    아카이브는 장기간 방대한 데이터들을 저장하고 필요에 따라 데이터를 회수(Retrieval)하는 것이 주된 목적입니다. 그리고 저장된 데이터들을 찾기 위해서는 특정 시간대를 정하여 시간대에 해당되는 데이터들을 검색하여 찾을 수 있습니다. 아카이브는 백업보다 데이터 액세스가 적고 방대한 데이터들을 저장하기에 더 적합합니다.