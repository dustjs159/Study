Load Balancer
=====================

Load Balancer

# L4 Switch Load Balancing
* 서버의 사용자가 늘어나고, 그에 따라 규모가 커지게 되며 트래픽 증가
* 로드 밸런싱은 이러한 서버의 증가하는 트래픽을 처리하기 위함
* 서버의 성능을 높이는 Scale-Up은 한계가 있으므로 서버를 여러 대 증설하는 Scale-Out작업 진행
* L4 스위치는 외부에서 들어오는 요청을 받아 서버들에게 적절히 나누어 줌
* 기본 기능
> * Health Check : 주기적으로 서버들의 장애 여부 판단. Pool 멤버 하나가 이상이 생겼을 때 다른 정상 작동>중인 멤버로 트래픽을 보내줌
> * Tunneling : 눈에 보이지 않는 통로를 만들어 통신. 클라이언트와 서버 사이에서 상호간 연결 되었을 때만 캡슐화된 패킷을 구별해 캡슐화 해제
> * NAT(Network Address Translation) : IP주소 변환. 외부와 통신을 하기위한 Virtual Server의 IP(VIP)와 내
부 네트워크에서 사용하기 위한 사설 IP주소간 변환하는 역할을 함.(DNAT)
> * DSR(Direct Server Return) : 서버에서 클라이언트로 응답을 전달할 때 로드밸런서를 거치지 않고 바로 전>달하는 방식. 로드밸런서의 부하를 줄여줄 수 있다.
* 알고리즘
> * Round Robin : 세션을 순차적으로 맺어줌(순차적으로 서버에 요청을 전송). 서버들은 같은 처리량을 가지고
 있어야 하며 모든 클라이언트는 동일하게 취급. 트래픽을 골고루 분산시키지 못한다는 단점 존재
> * Weighted Round Robin : 서버에 가중치를 두고 많이 처리할 수 있는 서버로 트래픽을 전송
> * Least Connection : 세션이 가장 적은 서버에 트래픽 전송
> * Response Time : 서버들 중 가장 빠른 응답시간을 보내는 서버로 트래픽을 전송. 각 서버들의 성능과 처리>중인 트래픽이 다를 경우에 사용
> * Hash : 클라이언트의 IP주소와 port번호를 통해 특정 클라이언트의 트래픽은 특정 서버에만 할당하는 방식. 경로가 보장되고 접속자 수가 많을 때 분산 효율이 좋다

# L4 Switch Fail over
* 이중화(다중화)
* 서버의 고장(시스템 장애)에 대비하여 오랜 기간 동안 장애 없는 서비스를 제공하기 위한 방법
* 동작 원리
> * L4 스위치에 VIP로 IP를 할
