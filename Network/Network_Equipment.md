Network Equipment
================================

# 네트워크 장비
* 송신자와 수신자가 데이터 통신을 가능하게 해주는 장비
* 데이터 통신을 위한 전송매체

# LAN 카드
* NIC(Network Interface Cared)
* 네트워크 안에서 컴퓨터 간 통신을 하기위한 장비
* 네트워크 연결 및 데이터 전송 담당
* 컴퓨터에서 처리된 데이터를 전기적 신호로 변환하거나 그 반대의 과정을 담당
* 물리계층에서 사용

# 리피터(Repeater)
* 신호 증폭의 역할
* 전송되는 신호가 여러 방해 요인들로 인해 왜곡되거나 약해질 경우 증폭을 하는 역할
* 전송 거리의 연장을 목적으로 사용

# 허브(HUB)
* 리피터에 여러 개의 포트를 장착
* 리피터의 기능 포함
* 더미 허브(Dummy Hub)   
> * 컴퓨터간 네트워크를 단순히 연결   
> * 데이터를 받으면 포트에 연결된 모든 장비에 전송(브로드캐스팅)   
> * 보유한 대역폭을 연결한 컴퓨터 수 만큼 나누어 제공함   
> * 포트에 많은 장비가 연결될 경우 전송 속도가 감소   

# 브리지(Bridge)
* LAN내의 컴퓨터들을 연결
* 네트워크 내 컴퓨터 중에서 **MAC 주소**를 기반으로 목적지에 데이터를 전송함
* 데이터 링크 계층에서 사용

# 스위치(Switch)
* 네트워크와 네트워크를 연결하는 통신 장비
* LAN과 LAN을 연결
* 허브보다 전송 속도가 개선
* 더미 허브와 다르게 필요한 곳에만 데이터 전송이 가능(스위칭 허브)
* 전송 중 패킷의 충돌을 방지하기 위해 지정한 목적지로 패킷을 직접 전송
* 데이터 링크 계층에서 사용
* 계층별 사용하는 스위치에 따라 L2, L3, L4, L7 스위치로 분류

# L2 Switch : **MAC주소 기반 스위칭**
* 일반적으로 부르는 스위치. 허브의 상위 장비
* 수신한 데이터 패킷의 목적지를 찾는데, 이 때 **MAC주소**를 기반으로 목적지를 찾고 해당 목적지에만 패킷 전송
* 연결되는 장비의  IP주소는 알 수 없음
* 동일 네트워크 내에서만 사용 가능
* 기본적으로 라우팅 기능 제외
* 상위 계층 프로토콜을 이용한 스위칭 불가
* 데이터 링크 계층(L2)에서 사용
* 장점 : 구조가 간단하고 가격이 저렴하여 구성이 쉬움
* 단점 : broadcast패킷에 의해 성능 저하가 발생할 수 있고, 라우팅이 불가능하다.

# L3 Switch : **IP주소 기반 스위칭**
* L2 Switch의 상위 장비(=Router)
* 서로 다른 네트워크 연결 가능
* 수신한 데이터 패킷의 목적지가 내부에는 없는 외부의 IP주소일 때 해당 패킷을 외부와 연결되어 있는 라우터에 전송
* **IP주소**를 찾아서 해당 목적지에만 패킷 전송
* L2 Switch의 모든 기능을 사용할 수 있고 **라우팅** 기능이 추가됨
* 네트워크 계층(L3)에서 사용
* 장점 : broadcast패킷에 의한 성능 저하 방지, 트래픽 체크 기능 추가
* 단점 : 특정 프로토콜을 이용해야 스위칭이 가능

# L4 Switch : **Load Balancing**
* L3 Switch의 상위 장비
* L4 스위치는 TCP/IP 기반으로 동작하고, TCP의 **Port번호**와 IP의 IP주소를 기반으로 목적지를 찾음
* 데이터 패킷의 IP주소와 **Port번호**를 찾아서 해당 목적지에만 패킷 전송
* **Load Balancing(부하 분산)** 기능 추가
* **보안성** 향상
* 프로토콜의 헤더를 보고 프로토콜의 종류를 확인하고 어떤 처리를 먼저 진행할 것인지 판단할 수 있음
* 전송 계층(L4)에서 사용
* 장점 : 트래픽 분산이 가능하다(로드밸런싱), 보안성이 높다.
* 단점 : 프로토콜에 의존적이고, 가격이 비싸다.
 
# L4 Switch 자세히 알아보기 
* 부하 분산 : 해야할 작업을 나누어 부하를 분산시키는 것
* 서버의 사용자가 늘어나고, 그에 따라 규모가 커지면서 필요성 대두
* L4 스위치는 외부에서 들어오는 요청을 받아 서버들에게 적절히 나누어 줌   
   
![l4switch1](https://user-images.githubusercontent.com/57285121/115341997-80c5e380-a1e4-11eb-8fad-8fed34bafc4f.PNG)   
* 운영중이던 서버를 증설할 경우에 새로운 서버를 만들고 IP를 할당을 했을 때 서버를 증설했음에도 불구하고 사용자들은 기존 운영중이던 서버에만 접속을 하게될 수도 있음   
* 이 때 L4 스위치가 증설한 서버에도 요청을 보내서 요청을 분산시킴
* 일일이 서버에 요청을 전달할 필요 없이 L4 스위치에 모든 요청을 전달하고 L4 스위치가 증설한 서버들에게 까지도 요청을 전송 →  요청 분산
* 이렇게 되면 서버들은 일일이 공인 IP를 가질 필요가 없고 L4 스위치 하나만 공인 IP가 있으면 됨
* 외부에서는 서버들의 IP를 알 수 없으니 서버에 악의적인 공격을 할 수 없게 됨 →  보안성 향상
* 하나의 서버에서는 여러 port번호를 이용해 종류별로 다양한 서비스를 제공을 하게 됨
* port번호를 모르는 상태에서 IP만 가지고 접속을 하면 어느port로 접속해야할 지 모르기 때문에 L4 스위치에는 외부에서 접속할 IP뿐만 아니라 port번호까지도 명시   
   
![l4switch2](https://user-images.githubusercontent.com/57285121/115347104-f71a1400-a1eb-11eb-9214-abccd34cbb95.PNG)   
* 외부에서 접속할 때 사요하는 IP와 port번호를 갖고있는 L4 스위치의 구성요소를 **Virtual Server**라고 함
* Virtual Server의 IP를 VIP(Vitrual IP)라고 함. L4 스위치는 다수의 Virtual Server를 가질 수 있음
* 실제 데이터(HTTP의 쿠키 등)를 분석해**보안성에 있어서 정교한 로드밸런싱**이 가능해짐
* Virtual Server은 받은 요청들을 서버들의 집합에 전달하게 되는데 이 집합을 Pool이라고 하고 그 Pool을 구성하는 서버들을 Pool 멤버라고 부름(Pool은 다수의 Pool 멤버로 구성)
* Pool 멤버들은 단순 IP가 아니라 IP와 port번호로 구성된 서버.(IP가 같아도 port번호가 다르면 다른 멤버)


# L7 Switch : **보안을 고려한 로드밸런싱**
* 네트워크 보안장비의 역할을 함
* L4 Switch에 실제 데이터를 확인하여 패킷을 처리하는 기능 추가
* 데이터 패킷의 Port번호와 실제 데이터를 기반으로 해당 목적지에 패킷 전송
* 실제 데이터(HTTP의 쿠키 등)를 분석해**보안성에 있어서 정교한 로드밸런싱**이 가능해짐

* 로드밸런싱 알고리즘
1. Round Robin
> 서버에 들어온 요청을 순서대로 돌아가며 배정하는 방식   
> 서버와 연결이 장기간 필요하지 않은 경우 적합   
2. 가중 라운드 로빈
> 각 서버에 가중치를 매기고 가중치가 높은 서버에 요청을 처리   
> 운영중인 서버마다 각각 부하 처리능력이 다를 경우 사용   
3. Least Connection
> 요청이 들어온 시점에 서버들 중에서 가장 연결이 적게 되어있는 서버에게 요청을 처리   
> 운영중인 서버들에게 분배된 트래픽이 일정하지 않은 경우에 사용   
4. IP 해시 방식
> 클라이언트의 IP주소를 특정 서버로 매핑하여 요청을 처리   
> 사용자가 항상 동일한 서버로 연결됨   












 
