Web Server
=================================
## Summary
- Last Updated : 21.05.28 Fri    
- Updated by : 윤연선
-----------------------------------

# Web Server
   
<img width="541" alt="스크린샷 2021-05-27 오후 6 18 33" src="https://user-images.githubusercontent.com/57285121/119800669-f4f85300-bf17-11eb-8472-55fafe71d24d.png">
    
* 클라이언트의 요청(HTTP Request)을 받아 해당 요청에 대한 정보를 클라이언트에게 응답(HTTP Response)으로 반환해주는 서버

## 정적 페이지
* 클라이언트의 요청에 항상 같은 내용을 보여주는 웹 페이지
* 개발자에 의해 사전에 미리 준비된 페이지
* HTML, CSS 등으로만 구성
* Ex) 어느 사용자가 접속을 해도 항상 같은 내용만 표시되는 회사소개 페이지

## 동적 페이지
* 클라이언트의 요청에 따라 다른 내용을 보여주는 웹 페이지
* 미리 만들어진 웹 페이지가 아닌 클라이언트의 요청 시 만들어지는 웹 페이지
* Ex) 로그인 정보를 가져온 웹 페이지, 쇼핑몰 결제항목 등

# Web Server 종류

## Apache HTTP Server
* 리눅스 기반 무료 오픈소스 웹서버(누구나 사용 가능)
* 프로세스와 스레드 기반으로 클라이언트의 요청을 처리
* MPM(Multi Processing Module)방식으로 HTTP 요청을 처리
* 모듈이라는 개념으로 많은 기능을 덧붙일 수 있음
* 클라이언트의 요청이 있을 때 마다 프로세스 혹은 스레드를 생성하는 구조.
* PreFork MPM(멀티 프로세스 + 단일 스레드)
   
<img width="376" alt="스크린샷 2021-05-27 오후 6 41 21" src="https://user-images.githubusercontent.com/57285121/119804247-232b6200-bf1b-11eb-8010-2a47564ba8f5.png">
   
> * 미리 복수의 프로세스를 생성하여 클라이언트의 요청에 대비하는 멀티프로세스 방식   
> * 프로세스와 스레드가 1:1   
> * 프로세스간 메모리를 공유하지 않기 때문(메모리 공간이 독립)에 시스템 다운 시에도 안정적   
> * 메모리의 사용량이 상대적으로 많다는 단점   
* Worker MPM(멀티 프로세스 + 멀티 스레드)
   
<img width="373" alt="스크린샷 2021-05-28 오전 12 21 06" src="https://user-images.githubusercontent.com/57285121/119852823-9a2c1f00-bf4a-11eb-9e34-c09ae8d6d0ed.png">
   
> * 프로세스 내에서 멀티 스레드로 처리하는 방식   
> * 메모리의 사용량이 상대적으로 적기 때문에 동시 사용자가 많은 사이트에 적합   
> * 스레드 간 메모리를 공유하기 때문에 시스템 다운 시 안정적이지 못함   

* 프로세스가 blocking 상태일 경우 요청을 처리하지 못하고 처리 완료 시까지 대기함
* Keep Alive(접속대기)로 해결이 가능하지만 효율이 떨어짐
* Keep Alive On 상태에서는 KeepAliveTimeOut 시간동안 연결을 끊지 않고 다음 요청을 기다림(다시 하나하나 연결을 생성하고 끊는 작업을 할 필요가 없음)
* Keep Alive를 통해 대량 접속 시 오히려 효율이 떨어질 수 있음
* 장점   
> * 모듈들을 활용해 서비스 확장이 수월   
> * 다른 프로그래밍 언어나 DBMS와도 호환이 좋기 때문에 확장하기가 수월   
> * WAS인 Tomcat과 연결 시 동적 컨텐츠도 제공이 가능   
* 단점   
> * 대량 접속 시 성능 저하 가능성이 있음   
> * 메모리의 사용이 증가하고 추가적인 프로세스와 스레드 생성비용에 추가적으로 자원이 소모됨   


## Nginx
* 경량화 웹 서버
* Evnet-Driven 구조로 동작. Event handler가 대기시간 없이 즉각적으로 작업을 처리
   
<img width="442" alt="스크린샷 2021-05-28 오전 3 05 27" src="https://user-images.githubusercontent.com/57285121/119875319-95bf3080-bf61-11eb-9df2-38fafae405fa.png">
   
* 고정된 프로세스 혹은 스레드만을 생성하여 사용하고 non-blocking 방식으로 클라이언트의 요청을 처리
* 하나의 Master 프로세스와 다수의 Worker 프로세스로 구성되어 실행
   
<img width="685" alt="스크린샷 2021-05-28 오전 3 11 53" src="https://user-images.githubusercontent.com/57285121/119876079-7674d300-bf62-11eb-91aa-9ab4071faa51.png">
   
* Master 프로세스는 Worker 프로세스를 관리
* Worker 프로세스는 클라이언트의 모든 요청을 처리
* WAS와 연계하여 로드밸런소로도 사용할 수 있음
* 장점   
> * Apache에 비해 빠른 속도(우수한 성능)
> * 새로운 프로세스와 스레드를 생성하지 않기 때문에 추가적인 자원이 소모되지 않음(적은 자원으로도 효율적인 운영 가능)   
> * non-blocking 방식 처리로 다수의 클라이언트의 요청을 효율적으로 처리할 수 있음   
* 단점   
> * 윈도우와 호환이 잘 되지 않음   
> * Apache에 비해 오픈소스가 적음   

## IIs(Internet Information Service)
* 윈도우 기반 웹 서버 소프트웨어
* 장점   
> * 간편한 GUI를 통해 쉽게 설치하고 사용이 가능   
* 단점   
> * OS 중 윈도우만 지원하기 때문에 다른 OS에서는 사용 불가   

